import {
  createClient
} from "./chunk-OPZ5Q4MD.js";
import "./chunk-SOMMRNYL.js";
import "./chunk-PLDDJCW6.js";

// src/lib/supabase.ts
var supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
var supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY;
if (!supabaseUrl || !supabaseKey) {
  throw new Error("Variables d'environnement Supabase manquantes");
}
var supabase = createClient(
  supabaseUrl,
  supabaseKey,
  {
    auth: {
      autoRefreshToken: true,
      persistSession: true,
      detectSessionInUrl: true,
      storage: window.localStorage,
      flowType: "pkce"
    },
    global: {
      headers: {
        "X-Client-Info": "supabase-js-v2"
      }
    },
    db: {
      schema: "public"
    }
  }
);
async function checkSupabaseConnection() {
  try {
    const { data, error } = await supabase.from("sales_reps").select("count", { count: "exact", head: true });
    if (error) {
      console.error("Supabase connection error:", error);
      if (error.code === "PGRST301" || error.code === "42501") {
        console.log("Connection OK, but authentication required");
        return true;
      }
      return false;
    }
    console.log("Supabase connection successful");
    return true;
  } catch (error) {
    console.warn("Connection check failed:", error);
    return false;
  }
}
export {
  checkSupabaseConnection,
  supabase
};
//# sourceMappingURL=supabase-PSP3SS3H.js.map
